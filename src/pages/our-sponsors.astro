---
import { SITE_TITLE } from "../consts";
import Nav from "../components/Nav.astro";
import Footer from "../components/Footer.astro";
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import { dynamicViteAssetImport } from "../dynamicViteAssetImport";

const sponsors = await getCollection("sponsors");
---

<Layout title={`${SITE_TITLE} - Our Sponsors`} description="Our sponsors">
    <Nav />

    <main class="mx-auto max-w-[96rem] flex-grow">
      <header class="mb-4">
        <h1 class="text-4xl font-light w-full flex justify-center align-middle">
          Our Sponsors
        </h1>
        <hr class="w-3/4 h-1 mx-auto" />
      </header>

      <div class="flex justify-center">
        <div class="flex justfy-center flex-wrap gap-4 w-3/4">
          {
            sponsors.map((sponsor) => (
              <a href={sponsor.data.website} class="basis-full md:basis-1/3 lg:basis-1/4 grow shrink">
                <div class="rounded-3xl border overflow-hidden hover:border-black hover:cursor-pointer h-96">
                  <Image
                    class="object-cover h-1/2 w-full object-center border-b"
                    src={dynamicViteAssetImport("images/sponsors/" + sponsor.data.image)}
                    alt={sponsor.data.description}
                  />
                  <div class="w-full h-full pl-4 pt-2">
                    <h2 class="text-2xl">{sponsor.data.name}</h2>
                    <p>{sponsor.data.description}</p>
                  </div>
                </div>
              </a>
            ))
          }
        </div>
      </div>
    </main>

    <span>
      <Footer />
    </span>
</Layout>
